applications:
  - name: be-prod
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-DSM-BE
      branch: main
      installationId: "82814703"
      hash: 3c03f8766e0110a0ae74411487ced6f6d7c87275
      # triggerPaths:
      #   - jobis-application/**
      #   - jobis-infrastructure/**
      #   - build.gradle
      #   - settings.gradle
      #   - gradle/**
      #   - gradlew
      #   - gradlew.bat
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: /jobis-infrastructure/build/libs/*.jar
        buildCommand: "./gradlew :jobis-infrastructure:bootJar"
    endpoints:
      - port: 8080
        routes:
          - jobis-api.dsmhs.kr
  - name: be-stag
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-DSM-BE
      branch: develop
      installationId: "82814703"
      hash: e7fbdd407f685200682b89167949583b3ada454a
      # triggerPaths:
      #   - jobis-application/**
      #   - jobis-infrastructure/**
      #   - build.gradle
      #   - settings.gradle
      #   - gradle/**
      #   - gradlew
      #   - gradlew.bat
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: /jobis-infrastructure/build/libs/*.jar
        buildCommand: "./gradlew :jobis-infrastructure:bootJar"
    endpoints:
      - port: 8080
        routes:
          - jobis-api-stag.dsmhs.kr
  - name: fe-admin-prod
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: main
      installationId: "82814703"
      hash: a9d7cef7e2cbb78783e58eaa6b00b5096103c8de
      # triggerPaths:
      #   - apps/admin/**
      #   - packages/**
      #   - package.json
      #   - yarn.lock
      #   - nx.json
      #   - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: /apps/admin/dist
        buildCommand: "yarn install && yarn nx build admin"
    endpoints:
      - port: 8080
        routes:
          - jobis-admin.dsmhs.kr
  - name: fe-admin-stag
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: develop
      installationId: "82814703"
      hash: 11313ac09a1d6cbc5dbe3f15713391b486f145b1
      # triggerPaths:
      #   - apps/admin/**
      #   - packages/**
      #   - package.json
      #   - yarn.lock
      #   - nx.json
      #   - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: /apps/admin/dist
        buildCommand: "yarn install && yarn nx build admin"
    endpoints:
      - port: 8080
        routes:
          - jobis-admin-stag.dsmhs.kr
  - name: fe-company-prod
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: main
      installationId: "82814703"
      hash: a9d7cef7e2cbb78783e58eaa6b00b5096103c8de
      # triggerPaths:
      #   - apps/company/**
      #   - packages/**
      #   - package.json
      #   - yarn.lock
      #   - nx.json
      #   - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: /apps/company/dist
        buildCommand: "yarn install && yarn nx build company"
    endpoints:
      - port: 8080
        routes:
          - jobis-company.dsmhs.kr
  - name: fe-company-stag
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: develop
      installationId: "82814703"
      hash: 11313ac09a1d6cbc5dbe3f15713391b486f145b1
      # triggerPaths:
      #   - apps/company/**
      #   - packages/**
      #   - package.json
      #   - yarn.lock
      #   - nx.json
      #   - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: /apps/company/dist
        buildCommand: "yarn install && yarn nx build company"
    endpoints:
      - port: 8080
        routes:
          - jobis-company-stag.dsmhs.kr
  - name: fe-student-prod
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: main
      installationId: "82814703"
      hash: a9d7cef7e2cbb78783e58eaa6b00b5096103c8de
      # triggerPaths:
      #   - apps/student/**
      #   - packages/**
      #   - package.json
      #   - yarn.lock
      #   - nx.json
      #   - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: /apps/student/dist
        buildCommand: "yarn install && yarn nx build student"
    endpoints:
      - port: 8080
        routes:
          - jobis.dsmhs.kr
  - name: fe-student-stag
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: develop
      installationId: "82814703"
      hash: d4e8addd653602456961ca5946a2394ee68dff55
      # triggerPaths:
      #   - apps/student/**
      #   - packages/**
      #   - package.json
      #   - yarn.lock
      #   - nx.json
      #   - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: /apps/student/dist
        buildCommand: "yarn install && yarn nx build student"
    endpoints:
      - port: 8080
        routes:
          - jobis-stag.dsmhs.kr
addons:
  - name: jobis-redis
    type: redis
    tier: x3.micro
    storage: 1Gi
  - name: jobis-prod-mysql
    type: mysql
    tier: x3.micro
    storage: 1Gi
  - name: jobis-stag-mysql
    type: mysql
    tier: x3.micro
    storage: 1Gi
