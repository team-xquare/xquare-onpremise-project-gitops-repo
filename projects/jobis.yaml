applications:
  - name: be-prod
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-DSM-BE
      branch: main
      installationId: "82814703"
      hash:
      triggerPaths:
        - jobis-application/
        - jobis-infrastructure/
        - build.gradle
        - settings.gradle
        - gradle/
        - gradlew
        - gradlew.bat
    build:
      javaVersion: "17"
      jarOutputPath: jobis-infrastructure/build/libs/*.jar
      buildCommand: "./gradlew :jobis-infrastructure:bootJar"
    endpoints:
      port: 8080
      routes:
        - jobis-api.dsmhs.kr
  - name: be-stag
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-DSM-BE
      branch: develop
      installationId: "82814703"
      hash:
      triggerPaths:
        - jobis-application/
        - jobis-infrastructure/
        - build.gradle
        - settings.gradle
        - gradle/
        - gradlew
        - gradlew.bat
    build:
      javaVersion: "17"
      jarOutputPath: jobis-infrastructure/build/libs/*.jar
      buildCommand: "./gradlew :jobis-infrastructure:bootJar"
    endpoints:
      port: 8080
      routes:
        - jobis-api-stag.dsmhs.kr
  - name: fe-admin-prod
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: main
      installationId: "82814703"
      hash:
      triggerPaths:
        - apps/admin/
        - packages/
        - package.json
        - yarn.lock
        - nx.json
        - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: apps/admin/dist
        buildCommand: "nx build admin"
    endpoints:
      port: 8080
      routes:
        - jobis-admin.dsmhs.kr
  - name: fe-admin-stag
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: develop
      installationId: "82814703"
      hash:
      triggerPaths:
        - apps/admin/
        - packages/
        - package.json
        - yarn.lock
        - nx.json
        - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: apps/admin/dist
        buildCommand: "nx build admin"
    endpoints:
      port: 8080
      routes:
        - jobis-admin-stag.dsmhs.kr
  - name: fe-company-prod
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: main
      installationId: "82814703"
      hash:
      triggerPaths:
        - apps/company/
        - packages/
        - package.json
        - yarn.lock
        - nx.json
        - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: apps/company/dist
        buildCommand: "nx build company"
    endpoints:
      port: 8080
      routes:
        - jobis-company.dsmhs.kr
  - name: fe-company-stag
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: develop
      installationId: "82814703"
      hash:
      triggerPaths:
        - apps/company/
        - packages/
        - package.json
        - yarn.lock
        - nx.json
        - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: apps/company/dist
        buildCommand: "nx build company"
    endpoints:
      port: 8080
      routes:
        - jobis-company-stag.dsmhs.kr
  - name: fe-student-prod
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: main
      installationId: "82814703"
      hash:
      triggerPaths:
        - apps/student/
        - packages/
        - package.json
        - yarn.lock
        - nx.json
        - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: apps/student/dist
        buildCommand: "nx build student"
    endpoints:
      port: 8080
      routes:
        - jobis.dsmhs.kr
  - name: fe-student-stag
    tier: x3.small
    github:
      owner: Team-return
      repo: JOBIS-FE-V2
      branch: develop
      installationId: "82814703"
      hash:
      triggerPaths:
        - apps/student/
        - packages/
        - package.json
        - yarn.lock
        - nx.json
        - tsconfig.base.json
    build:
      vite:
        nodeVersion: "23.11.0"
        distPath: apps/student/dist
        buildCommand: "nx build student"
    endpoints:
      port: 8080
      routes:
        - jobis-stag.dsmhs.kr
addons:
  - name: jobis-redis
    type: redis
    tier: x3.micro
    storage: 1Gi
  - name: jobis-mysql
    type: mysql
    tier: x3.micro
    storage: 1Gi
