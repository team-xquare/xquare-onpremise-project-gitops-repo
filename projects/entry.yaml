applications:
  - name: equus-application-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Equus-Application
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      gradle:
        jdkVersion: 17
        buildDir: .
        outputDir: /application-infrastructure/build/libs/application-infrastructure-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew build -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - equus-application.xquare.app
  - name: equus-api-gateway-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-Api-Gateway
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      gradle:
        jdkVersion: 17
        buildDir: .
        outputDir: /build/libs/Equus-Api-Gateway-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew build -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - equus.xquare.app
  - name: casper-recruitment-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Casper-Recruitment
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      gradle:
        jdkVersion: 17
        buildDir: /
        outputDir: /build/libs/Equus-Github-Auth-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew build -x test
    endpoints:
      - port: 8080
        routes:
          - prod-entry-casper-recruitment.xquare.app
  - name: casper-recruitment-stag
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Casper-Recruitment
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      gradle:
        jdkVersion: 17
        buildDir: /
        outputDir: /build/libs/Equus-Github-Auth-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew build -x test
    endpoints:
      - port: 8080
        routes:
          - stag-entry-casper-recruitment.xquare.app
  - name: equus-user-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-User
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      gradle:
        jdkVersion: 17
        buildDir: .
        outputDir: /build/libs/Equus-User-0.0.0.jar
        buildCommand: ./gradlew build -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - equus-feed.xquare.app
  - name: equus-feed-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-Feed
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      gradle:
        jdkVersion: 17
        buildDir: .
        outputDir: /build/libs/Equus-Feed-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew build -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - equus-feed.xquare.app
  - name: entry-internship-user-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Internship
      branch: develop
      installationId: "77967720"
      hash: latest
    build:
      vite:
        nodeVersion: "22"
        buildDir: /
        outputDir: /apps/entry-user/dist
        port: 4200
        buildCommand: yarn install && npx nx run @entry-internship/entry-user:build
    endpoints:
      - port: 4200
        routes:
          - entry-recruit.xquare.app
  - name: entry-internship-admin-stag
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Internship
      branch: develop
      installationId: "77967720"
    build:
      vite:
        nodeVersion: "22"
        buildDir: /
        outputDir: /apps/entry-admin/dist
        port: 4200
        buildCommand: yarn install && npx nx run @entry-internship/entry-admin:build
    endpoints:
      - port: 4200
        routes:
          - entry-recruit-admin.xquare.app
  - name: equus-status-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-Status
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      gradle:
        jdkVersion: 17
        buildDir: .
        outputDir: /build/libs/Equus-Status-0.0.0.jar
        buildCommand: ./gradlew build -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - equus-status.xquare.app
  - name: equus-schedule-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-Schedule
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      gradle:
        jdkVersion: 17
        buildDir: .
        outputDir: /build/libs/Equus-Schedule-0.0.0.jar
        buildCommand: ./gradlew build -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - equus-schedule.xquare.app
  - name: entry-lts-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
    build:
      react:
        nodeVersion: "18"
        buildDir: /packages/Entry-LTS
        buildCommand: cd packages/Entry-LTS && npm install && npm run build
    endpoints:
      - port: 8080
        routes:
          - www.entrydsm.hs.kr
  - name: entry-auth-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
    build:
      react:
        nodeVersion: "18"
        buildDir: /packages/Entry-Auth
        buildCommand: cd packages/Entry-Auth && npm install && npm run build
    endpoints:
      - port: 8080
        routes:
          - auth.entrydsm.hs.kr
  - name: entry-admission-lts-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
    build:
      react:
        nodeVersion: "18"
        buildDir: /packages/Admission-LTS
        buildCommand: cd packages/Admission-LTS && npm install && npm run build
    endpoints:
      - port: 8080
        routes:
          - apply.entrydsm.hs.kr
  - name: entry-admission-admin-lts-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
    build:
      react:
        nodeVersion: "18"
        buildDir: /packages/Admission-Admin-LTS
        buildCommand: cd packages/Admission-Admin-LTS && npm install && npm run build
    endpoints:
      - port: 8080
        routes:
          - admin.entrydsm.hs.kr
  - name: equus-config-server-stag
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-Config-Server
      branch: main
      installationId: "77967720"
    build:
      gradle:
        jdkVersion: 11
        buildDir: .
        outputDir: /build/libs/*.jar
        buildCommand: ./gradlew build -x test
    endpoints:
      - port: 8888
        routes:
          - equus-config.xquare.app
