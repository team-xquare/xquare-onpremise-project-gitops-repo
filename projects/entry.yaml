applications:
  - name: equus-application-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Equus-Application
      branch: main
      installationId: "77967720"
      hash: f99f61af991ac2847e74cb837173f6350c7226db
    build:
      gradle:
        version: 17
        outputPath: /application-infrastructure/build/libs/application-infrastructure-0.0.1-SNAPSHOT.jar
        sourcePath: .
        buildCmd: ./gradlew bootJar -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - application.entrydsm.hs.kr
  - name: equus-api-gateway-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-Api-Gateway
      branch: main
      installationId: "77967720"
      hash: ace663c9a614cf4427a1b108f25b5c7208a1861c
    build:
      gradle:
        version: 17
        outputPath: /build/libs/Equus-Api-Gateway-0.0.1-SNAPSHOT.jar
        sourcePath: .
        buildCmd: ./gradlew bootJar -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - api.entrydsm.hs.kr
  - name: equus-user-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-User
      branch: main
      installationId: "77967720"
      hash: c7c6950a3a2ec44a46f172c46ee6b69b24fcc50a
    build:
      gradle:
        version: 17
        outputPath: /build/libs/Equus-User-0.0.0.jar
        sourcePath: .
        buildCmd: ./gradlew bootJar -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - user.entrydsm.hs.kr
  - name: equus-feed-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-Feed
      branch: main
      installationId: "77967720"
      hash: 800f6ea7e517a69a547fb09cb4e5b3710d86a885
    build:
      gradle:
        version: 17
        outputPath: /build/libs/Equus-Feed-0.0.1-SNAPSHOT.jar
        sourcePath: .
        buildCmd: ./gradlew bootJar -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - feed.entrydsm.hs.kr
  - name: equus-status-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-Status
      branch: main
      installationId: "77967720"
      hash: d96c114f25a8ada839b639b5a2b5aa8b9f14be99
    build:
      gradle:
        version: 17
        outputPath: /build/libs/Equus-Status-0.0.0.jar
        sourcePath: .
        buildCmd: ./gradlew bootJar -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - status.entrydsm.hs.kr
  - name: equus-schedule-prod
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-Schedule
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      gradle:
        version: 17
        outputPath: /build/libs/Equus-Schedule-0.0.0.jar
        sourcePath: .
        buildCmd: ./gradlew bootJar -x test --build-cache
    endpoints:
      - port: 8080
        routes:
          - schedule.entrydsm.hs.kr
  - name: entry-lts-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      vite:
        version: "22"
        outputPath: /packages/Entry-LTS/build
        sourcePath: /
        buildCmd: yarn install && yarn workspace @entrydsm/main build
    endpoints:
      - port: 8080
        routes:
          - www.entrydsm.hs.kr
  - name: entry-auth-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      vite:
        version: "22"
        outputPath: /packages/Entry-Auth/build
        sourcePath: /
        buildCmd: yarn install && yarn workspace @entrydsm/auth build
    endpoints:
      - port: 8080
        routes:
          - auth.entrydsm.hs.kr
  - name: entry-admission-lts-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      vite:
        version: "22"
        outputPath: /packages/Admission-LTS/build
        sourcePath: /
        buildCmd: yarn install && yarn workspace @entrydsm/admission build
    endpoints:
      - port: 8080
        routes:
          - apply.entrydsm.hs.kr
  - name: entry-admission-admin-lts-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      vite:
        version: "22"
        outputPath: /packages/Admission-Admin-LTS/build
        sourcePath: /
        buildCmd: yarn install && yarn workspace @entrydsm/admin build
    endpoints:
      - port: 8080
        routes:
          - admin.entrydsm.hs.kr
  - name: equus-config-server-stag
    tier: x3.micro
    github:
      owner: EntryDSM
      repo: Equus-Config-Server
      branch: main
      installationId: "77967720"
      hash: latest
    build:
      gradle:
        version: 11
        outputPath: /build/libs/*.jar
        sourcePath: .
        buildCmd: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - config-stag.entrydsm.hs.kr
  - name: entry-admission-2025-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: fb6f7cbb010858a89f06e9b8d0a000bfd46e9ede
    build:
      vite:
        version: "22"
        outputPath: /apps/Admission-LTS/dist
        sourcePath: /
        buildCmd: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/admission-lts
    endpoints:
      - port: 8080
        routes:
          - entry-admission-admission-dev.entrydsm.hs.kr
  - name: entry-admission-2025-admin-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: 92187f440388a4dcb63b6af9e269f2c6a9b35b2a
    build:
      vite:
        version: "22"
        outputPath: /apps/entry-admin/dist
        sourcePath: /
        buildCmd: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/Entry-admin
    endpoints:
      - port: 8080
        routes:
          - entry-admission-admin-dev.entrydsm.hs.kr
  - name: entry-admission-2025-auth-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: 92187f440388a4dcb63b6af9e269f2c6a9b35b2a
    build:
      vite:
        version: "22"
        outputPath: /apps/entry-auth/dist
        sourcePath: /
        buildCmd: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/Entry-auth
    endpoints:
      - port: 8080
        routes:
          - entry-admission-auth-dev.entrydsm.hs.kr
  - name: entry-admission-2025-user-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: fb6f7cbb010858a89f06e9b8d0a000bfd46e9ede
    build:
      vite:
        version: "22"
        outputPath: /apps/entry-user/dist
        sourcePath: /
        buildCmd: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/Entry-user
    endpoints:
      - port: 8080
        routes:
          - entry-admission-user-dev.entrydsm.hs.kr
  - name: casper-config-server-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Casper-Config-Server
      branch: main
      installationId: "77967720"
      hash: f886488696fbb5ba44b96dd790e0c9dc44e3d088
    build:
      gradle:
        version: 21
        outputPath: /build/libs/configserver-0.0.1-SNAPSHOT.jar
        sourcePath: .
        buildCmd: ./gradlew bootJar -x test
    endpoints:
      - port: 8888
        routes:
          - entry-admission-api-config-server-dev.entrydsm.hs.kr
addons:
  - name: entry-redis
    type: redis
    tier: x3.micro
    storage: 1Gi
  - name: entry-config-server-database
    type: mysql
    tier: x3.micro
    storage: 1Gi
