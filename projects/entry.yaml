applications:
  - name: entry-lts-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
      hash: 2cdf3a608cf7bd67dbd67a6893dbb823ecf04ef8
    build:
      vite:
        nodeVersion: "22"
        distPath: /packages/Entry-LTS/build
        buildCommand: yarn install && yarn workspace @entrydsm/main build
    endpoints:
      - port: 8080
        routes:
          - www.entrydsm.hs.kr
  - name: entry-auth-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
      hash: 2cdf3a608cf7bd67dbd67a6893dbb823ecf04ef8
    build:
      vite:
        nodeVersion: "22"
        distPath: /packages/Entry-Auth/build
        buildCommand: yarn install && yarn workspace @entrydsm/auth build
    endpoints:
      - port: 8080
        routes:
          - auth.entrydsm.hs.kr
  - name: entry-admission-lts-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
      hash: 2cdf3a608cf7bd67dbd67a6893dbb823ecf04ef8
    build:
      vite:
        nodeVersion: "22"
        distPath: /packages/Admission-LTS/build
        buildCommand: yarn install && yarn workspace @entrydsm/admission build
    endpoints:
      - port: 8080
        routes:
          - apply.entrydsm.hs.kr
  - name: entry-admission-admin-lts-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Mono
      branch: main
      installationId: "77967720"
      hash: 2cdf3a608cf7bd67dbd67a6893dbb823ecf04ef8
    build:
      vite:
        nodeVersion: "22"
        distPath: /packages/Admission-Admin-LTS/build
        buildCommand: yarn install && yarn workspace @entrydsm/admin build
    endpoints:
      - port: 8080
        routes:
          - admin.entrydsm.hs.kr
  - name: entry-admission-2025-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: 16b75fe3cb57cf335b4f6d33d5c205abacfa5905
    build:
      vite:
        nodeVersion: "22"
        distPath: /apps/Admission-LTS/dist
        buildCommand: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/admission-lts
    endpoints:
      - port: 8080
        routes:
          - entry-admission-admission-dev.entrydsm.hs.kr
  - name: entry-admission-2025-admin-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: 16b75fe3cb57cf335b4f6d33d5c205abacfa5905
    build:
      vite:
        nodeVersion: "22"
        distPath: /apps/entry-admin/dist
        buildCommand: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/Entry-admin
    endpoints:
      - port: 8080
        routes:
          - entry-admission-admin-dev.entrydsm.hs.kr
  - name: entry-admission-2025-auth-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: 16b75fe3cb57cf335b4f6d33d5c205abacfa5905
    build:
      vite:
        nodeVersion: "22"
        distPath: /apps/entry-auth/dist
        buildCommand: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/Entry-auth
    endpoints:
      - port: 8080
        routes:
          - entry-admission-auth-dev.entrydsm.hs.kr
  - name: entry-admission-2025-user-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: 16b75fe3cb57cf335b4f6d33d5c205abacfa5905
    build:
      vite:
        nodeVersion: "22"
        distPath: /apps/entry-user/dist
        buildCommand: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/Entry-user
    endpoints:
      - port: 8080
        routes:
          - entry-admission-user-dev.entrydsm.hs.kr
  - name: casper-config-server-prod
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Casper-Config-Server
      branch: main
      installationId: "77967720"
      hash: 9d12491eea24d440ad23f34b20b6f175fb856659
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /build/libs/configserver-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8888
        routes:
          - entry-admission-api-config-server-dev.entrydsm.hs.kr
  - name: casper-feed-stag
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Casper-Feed
      branch: main
      installationId: "77967720"
      hash: 14402973b581eaca5af7bf6b50f2bc2fefacf83a
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /casper-feed/build/libs/casper-feed-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - casper-feed-dev.entrydsm.hs.kr
  - name: casper-user-stag
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Casper-User
      branch: main
      installationId: "77967720"
      hash: 43d626eed1a7b8b5cdf01f92d999dbe6d1e86b57
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /casper-user/build/libs/casper-user-0.0.1.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - casper-user-dev.entrydsm.hs.kr
  - name: casper-status-stag
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Casper-Status
      branch: main
      installationId: "77967720"
      hash: 38c03c1bdbf0234b9fe3c50bbaceeddf7992bc62
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /casper-status/build/libs/casper-status-0.0.1.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - casper-status-dev.entrydsm.hs.kr
  - name: casper-schedule-stag
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Casper-Schedule
      branch: main
      installationId: "77967720"
      hash: 6e6b361d2e22bcb89284a8714b8e701d5b5a55bc
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /build/libs/Casper-Schedule-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - casper-schedule-dev.entrydsm.hs.kr
addons:
  - name: entry-redis
    type: redis
    tier: x3.micro
    storage: 1Gi
  - name: entry-config-server-database
    type: mysql
    tier: x3.micro
    storage: 1Gi
  - name: casper-feed-database
    type: mysql
    tier: x3.micro
    storage: 1Gi
  - name: casper-user-database
    type: mysql
    tier: x3.micro
    storage: 1Gi
  - name: casper-status-database
    type: mysql
    tier: x3.micro
    storage: 1Gi
  - name: casper-schedule-database
    type: mysql
    tier: x3.micro
    storage: 1Gi
