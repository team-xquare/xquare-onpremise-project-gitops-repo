applications:
  - name: entry-admission
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: dd25504f98dd21f96353fd910b4513c2bef14037
      triggerPaths:
        - apps/Admission-LTS/**
    build:
      vite:
        nodeVersion: "22"
        distPath: /apps/Admission-LTS/dist
        buildCommand: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/admission-lts
    endpoints:
      - port: 8080
        routes:
          - admission.entrydsm.hs.kr
  - name: entry-admin
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: 635d11f23ab7425f500d7afb9eafd0f7cb1b47fe
      triggerPaths:
        - apps/entry-admin/**
    build:
      vite:
        nodeVersion: "22"
        distPath: /apps/entry-admin/dist
        buildCommand: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/Entry-admin
    endpoints:
      - port: 8080
        routes:
          - admin.entrydsm.hs.kr
  - name: entry-auth
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: afc927ff91402a7e4c2ec2c750c0a835f78e511f
      triggerPaths:
        - apps/entry-auth/**
    build:
      vite:
        nodeVersion: "22"
        distPath: /apps/entry-auth/dist
        buildCommand: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/Entry-auth
    endpoints:
      - port: 8080
        routes:
          - auth.entrydsm.hs.kr
  - name: entry-user
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Entry-Admission
      branch: develop
      installationId: "77967720"
      hash: 9597193785fe557259cb6537ba19229b0db9d96c
      triggerPaths:
        - apps/entry-user/**
    build:
      vite:
        nodeVersion: "22"
        distPath: /apps/entry-user/dist
        buildCommand: yarn install && yarn nx build @entry/design-token && yarn nx build @entry/ui && yarn nx build @entry/Entry-user
    endpoints:
      - port: 8080
        routes:
          - www.entrydsm.hs.kr
  - name: casper-config-server
    tier: x3.small
    github:
      owner: EntryDSM
      repo: Casper-Config-Server
      branch: main
      installationId: "77967720"
      hash: 3a7ad62f414b5d5d9b963345460a103f964ed306
    build:
      gradle:
        javaVersion: 21
        jarOutputPath: /build/libs/configserver-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8888
        routes:
          - config.entrydsm.hs.kr
  - name: casper-gate-way
    tier: x3.large
    github:
      owner: EntryDSM
      repo: Equus-Api-Gateway
      branch: main
      installationId: "77967720"
      hash: cb1dfa6be124137a858ed288b15d8d42574531c8
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /build/libs/Equus-Api-Gateway-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - api.entrydsm.hs.kr
  - name: casper-application
    tier: x3.large
    github:
      owner: EntryDSM
      repo: Casper-Application
      branch: main
      installationId: "77967720"
      hash: 6f44c8662d99a71a0efd28c6b42270625dd6417b
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /casper-application-infrastructure/build/libs/casper-application-infrastructure-0.0.1.jar
        buildCommand: ./gradlew :casper-application-infrastructure:bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - casper-application.entrydsm.hs.kr
  - name: casper-feed
    tier: x3.large
    github:
      owner: EntryDSM
      repo: Casper-Feed
      branch: main
      installationId: "77967720"
      hash: cf4caa3174434bae83e9b1c3ec804c043b80ed57
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /casper-feed/build/libs/casper-feed-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - casper-feed.entrydsm.hs.kr
  - name: casper-user
    tier: x3.large
    github:
      owner: EntryDSM
      repo: Casper-User
      branch: main
      installationId: "77967720"
      hash: 028041618e7e84a562d9c1bdb706a0751e7e179a
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /casper-user/build/libs/casper-user-0.0.1.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - casper-user.entrydsm.hs.kr
      - port: 9090
  - name: casper-status
    tier: x3.large
    github:
      owner: EntryDSM
      repo: Casper-Status
      branch: main
      installationId: "77967720"
      hash: 9ef3262ac384c553c08af6ecb122ac42434d9a96
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /casper-status/build/libs/casper-status-0.0.1.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - casper-status.entrydsm.hs.kr
      - port: 9091
  - name: casper-schedule
    tier: x3.large
    github:
      owner: EntryDSM
      repo: Casper-Schedule
      branch: main
      installationId: "77967720"
      hash: bd80f37ba8bb9bfbf8f0499e789185c673415f14
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /casper-schedule/build/libs/casper-schedule.jar
        buildCommand: ./gradlew :casper-schedule:bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - casper-schedule.entrydsm.hs.kr
      - port: 9093
addons:
  - name: entry-redis
    type: redis
    tier: x3.medium
    storage: 1Gi
  - name: entry-config-database
    type: mysql
    tier: x3.medium
    storage: 1Gi
  - name: casper-application-database
    type: mysql
    tier: x3.medium
    storage: 2Gi
  - name: casper-feed-database
    type: mysql
    tier: x3.medium
    storage: 1Gi
  - name: casper-user-database
    type: mysql
    tier: x3.medium
    storage: 1Gi
  - name: casper-status-database
    type: mysql
    tier: x3.medium
    storage: 1Gi
  - name: casper-schedule-database
    type: mysql
    tier: x3.medium
    storage: 1Gi
  - name: capser-kafka
    type: kafka
    tier: x3.medium
    storage: 10Gi
