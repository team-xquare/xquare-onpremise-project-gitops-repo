applications:
  - name: dms-backend-prod
    tier: x3.micro
    github:
      owner: team-aliens
      repo: DMS-Backend
      branch: main
      installationId: "64597732"
      hash: latest
    build:
      gradle:
        version: 17
        outputPath: /dms-infrastructure/build/libs/*.jar
        sourcePath: .
        buildCmd: export _JAVA_OPTIONS="-XX:-UsePerfData" && ./gradlew build -x test -x detekt --build-cache --no-daemon
    endpoints:
      - port: 8080
        routes:
          - dms-api.dsm-dms.com
  - name: dms-backend-stag
    tier: x3.micro
    github:
      owner: team-aliens
      repo: DMS-Backend
      branch: develop
      installationId: "64597732"
    build:
      gradle:
        version: 17
        outputPath: /dms-infrastructure/build/libs/*.jar
        sourcePath: .
        buildCmd: export _JAVA_OPTIONS="-XX:-UsePerfData" && ./gradlew build -x test -x detekt --build-cache --no-daemon
    endpoints:
      - port: 8080
        routes:
          - dms-dev-api.dsm-dms.com
