applications:
  - name: deuknet-be-prod
    github:
      owner: DeukNet
      repo: DeukNet-BE
      branch: main
      installationId: "101281047"
      hash: 93ec9fc29f1c27a130b8e81df0d2202ad666673a
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: "/deuknet-infrastructure/build/libs/*-SNAPSHOT.jar"
        buildCommand: "./gradlew clean build -x test"
    endpoints:
      - port: 8080
        routes:
          - deuknet-api.dsmhs.kr
  - name: deuknet-be-stag
    github:
      owner: DeukNet
      repo: DeukNet-BE
      branch: develop
      installationId: "101281047"
      hash: 4c3e2ada48b6fd7415a28266336e476a3bde051b
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: "/deuknet-infrastructure/build/libs/*-SNAPSHOT.jar"
        buildCommand: "./gradlew clean build -x test"
    endpoints:
      - port: 8080
        routes:
          - deuknet-api-stag.dsmhs.kr
  - name: deuknet-fe-prod
    github:
      owner: DeukNet
      repo: DeukNet-FE
      branch: main
      installationId: "101281047"
      hash: 4ae250ce52a3658ba9b9b815c344098dd34e41a3
    build:
      react:
        nodeVersion: "18"
        buildCommand: "npm ci && npm run build"
        distPath: "/dist"
    endpoints:
      - port: 8080
        routes:
          - deuknet.dsmhs.kr
addons:
  - name: deuknet-postgres
    type: postgresql
    version: "15"
    storage: 2Gi
  - name: deuknet-seaweedfs
    type: seaweedfs
    storage: 1Gi
    buckets:
      - name: deuknet-buckets
  - name: deuknet-elasticsearch
    type: elasticsearch
    storage: 2Gi
