applications:
  - name: deuknet-be-prod
    github:
      owner: DeukNet
      repo: DeukNet-BE
      branch: main
      installationId: "101281047"
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: "/deuknet-infrastructure/build/libs/*-SNAPSHOT.jar"
        buildCommand: "./gradlew clean build -x test"
    endpoints:
      - port: 8080
        routes:
          - deuknet-api.dsmhs.kr
  - name: deuknet-be-stag
    github:
      owner: DeukNet
      repo: DeukNet-BE
      branch: develop
      installationId: "101281047"
      hash: 6e94de7888658b7e6081967a6e7eaadaf1caaafc
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: "/deuknet-infrastructure/build/libs/*-SNAPSHOT.jar"
        buildCommand: "./gradlew clean build -x test"
    endpoints:
      - port: 8080
        routes:
          - deuknet-api-stag.dsmhs.kr
  - name: deuknet-fe-prod
    github:
      owner: DeukNet
      repo: DeukNet-FE
      branch: main
      installationId: "101281047"
      hash: 321a3fd83262940aed7348f3ea53a2e396ec1cab
    build:
      react:
        nodeVersion: "18"
        buildCommand: "npm ci && npm run build"
        distPath: "/dist"
    endpoints:
      - port: 8080
        routes:
          - deuknet.dsmhs.kr
addons:
  - name: deuknet-postgres
    type: postgresql
    version: "15"
    storage: 2Gi
  - name: deuknet-seaweedfs
    type: seaweedfs
    storage: 1Gi
    buckets:
      - name: deuknet-buckets
  - name: deuknet-elasticsearch
    type: elasticsearch
    storage: 2Gi
