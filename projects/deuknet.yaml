applications:
  - name: deuknet-be-prod
    github:
      owner: DeukNet
      repo: DeukNet-BE
      branch: main
      installationId: "101281047"
      hash: 2d5d54de63e4340ac6e81a2e8c56ddeb5d6b19bc
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: "/deuknet-infrastructure/build/libs/*-SNAPSHOT.jar"
        buildCommand: "./gradlew clean build -x test"
    endpoints:
      - port: 8080
        routes:
          - deuknet-api.dsmhs.kr
  - name: deuknet-be-stag
    github:
      owner: DeukNet
      repo: DeukNet-BE
      branch: develop
      installationId: "101281047"
      hash: a8de3a7f31e07c4cec54f7b6484233dc36cadc89
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: "/deuknet-infrastructure/build/libs/*-SNAPSHOT.jar"
        buildCommand: "./gradlew clean build -x test"
    endpoints:
      - port: 8080
        routes:
          - deuknet-api-stag.dsmhs.kr
  - name: deuknet-fe-prod
    github:
      owner: DeukNet
      repo: DeukNet-FE
      branch: main
      installationId: "101281047"
      hash: 73bb4414af4f37514ad8c3d9f6d2f3d1a2734650
    build:
      react:
        nodeVersion: "18"
        buildCommand: "npm ci && npm run build"
        distPath: "/dist"
    endpoints:
      - port: 8080
        routes:
          - deuknet.dsmhs.kr
addons:
  - name: deuknet-postgres
    type: postgresql
    version: "15"
    storage: 2Gi
  - name: deuknet-seaweedfs
    type: seaweedfs
    storage: 1Gi
    buckets:
      - name: deuknet-buckets
  - name: deuknet-elasticsearch
    type: elasticsearch
    storage: 2Gi
