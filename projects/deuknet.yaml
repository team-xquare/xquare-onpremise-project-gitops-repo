applications:
  - name: deuknet-be-prod
    github:
      owner: DeukNet
      repo: DeukNet-BE
      branch: main
      installationId: "101281047"
      hash: c04c55a302e5f0153f852601d9f67d3a9b8e1707
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: "/deuknet-infrastructure/build/libs/*-SNAPSHOT.jar"
        buildCommand: "./gradlew clean build -x test"
    endpoints:
      - port: 8080
        routes:
          - deuknet-api.dsmhs.kr
  - name: deuknet-be-stag
    github:
      owner: DeukNet
      repo: DeukNet-BE
      branch: develop
      installationId: "101281047"
      hash: ed38945fd9781dd9b6f0a0588ced463e719a4f41
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: "/deuknet-infrastructure/build/libs/*-SNAPSHOT.jar"
        buildCommand: "./gradlew clean build -x test"
    endpoints:
      - port: 8080
        routes:
          - deuknet-api-stag.dsmhs.kr
  - name: deuknet-fe-prod
    github:
      owner: DeukNet
      repo: DeukNet-FE
      branch: main
      installationId: "101281047"
      hash: b15afe1cedb7c4108cc34ec30f1b9c5ae2cca997
    build:
      react:
        nodeVersion: "18"
        buildCommand: "npm ci && npm run build"
        distPath: "/dist"
    endpoints:
      - port: 8080
        routes:
          - deuknet.dsmhs.kr
addons:
  - name: deuknet-postgres
    type: postgresql
    version: "15"
    storage: 2Gi
  - name: deuknet-seaweedfs
    type: seaweedfs
    storage: 1Gi
    buckets:
      - name: deuknet-buckets
  - name: deuknet-elasticsearch
    type: elasticsearch
    storage: 2Gi
