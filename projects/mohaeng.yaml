applications:
  - name: be-prod
    github:
      owner: SERVICE-MOHAENG
      repo: Mohaeng-BE
      branch: main
      installationId: "101846048"
      triggerPaths:
        - src/**
        - package.json
        - package-lock.json
        - nest-cli.json
        - tsconfig.json
      hash: 911398fe2fc179cb9cb02340b2d397efb4835001
    build:
      nodejs:
        nodeVersion: "20"
        buildCommand: "npm ci && npm run build"
        startCommand: "npm run start:prod"
    endpoints:
      - port: 8080
        routes:
          - mohaeng-api.dsmhs.kr
  - name: be-stag
    github:
      owner: SERVICE-MOHAENG
      repo: Mohaeng-BE
      branch: develop
      installationId: "101846048"
      triggerPaths:
        - src/**
        - package.json
        - package-lock.json
        - nest-cli.json
        - tsconfig.json
      hash: 89bfb8aa4c170e6411eeaa3e1e1dc56fa48b9fe4
    build:
      nodejs:
        nodeVersion: "20"
        buildCommand: "npm ci && npm run build"
        startCommand: "npm run start:prod"
    endpoints:
      - port: 8080
        routes:
          - mohaeng-api-stag.dsmhs.kr
addons:
  - name: prod-mysql
    type: mysql
    storage: 1Gi
  - name: stag-mysql
    type: mysql
    storage: 1Gi
  - name: prod-redis
    type: redis
    storage: 1Gi
  - name: stag-redis
    type: redis
    storage: 1Gi
