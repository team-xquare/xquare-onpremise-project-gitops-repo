applications:
  - name: be-prod
    github:
      owner: SERVICE-MOHAENG
      repo: Mohaeng-BE
      branch: main
      installationId: "101846048"
      triggerPaths:
        - src/**
        - package.json
        - package-lock.json
        - nest-cli.json
        - tsconfig.json
      hash: 15d019355a1c6999c7cb380fab568b87b2760860
    build:
      nodejs:
        nodeVersion: "20"
        buildCommand: "npm ci && npm run build"
        startCommand: "npm run start:prod"
    endpoints:
      - port: 8080
        routes:
          - mohaeng-api.dsmhs.kr
  - name: be-stag
    github:
      owner: SERVICE-MOHAENG
      repo: Mohaeng-BE
      branch: develop
      installationId: "101846048"
      triggerPaths:
        - src/**
        - package.json
        - package-lock.json
        - nest-cli.json
        - tsconfig.json
      hash: 737c1b016bcbcb964c2a1b85300e79a97a5b64bd
    build:
      nodejs:
        nodeVersion: "20"
        buildCommand: "npm ci && npm run build"
        startCommand: "npm run start:prod"
    endpoints:
      - port: 8080
        routes:
          - mohaeng-api-stag.dsmhs.kr
addons:
  - name: prod-mysql
    type: mysql
    storage: 1Gi
  - name: stag-mysql
    type: mysql
    storage: 1Gi
  - name: prod-redis
    type: redis
    storage: 1Gi
  - name: stag-redis
    type: redis
    storage: 1Gi
