applications:
  - name: be-prod
    github:
      owner: SERVICE-MOHAENG
      repo: Mohaeng-BE
      branch: main
      installationId: "101846048"
      triggerPaths:
        - src/**
        - package.json
        - package-lock.json
        - nest-cli.json
        - tsconfig.json
      hash: 3fedbd8d6871a07e2a6d8bed8dd70532d0623b61
    build:
      nodejs:
        nodeVersion: "20"
        buildCommand: "npm ci && npm run build"
        startCommand: "npm run start:prod"
    endpoints:
      - port: 8080
        routes:
          - mohaeng-api.dsmhs.kr
  - name: be-stag
    github:
      owner: SERVICE-MOHAENG
      repo: Mohaeng-BE
      branch: develop
      installationId: "101846048"
      triggerPaths:
        - src/**
        - package.json
        - package-lock.json
        - nest-cli.json
        - tsconfig.json
      hash: 0d2215f4db6bdc66f96824e6d7539f089d2b4f02
    build:
      nodejs:
        nodeVersion: "20"
        buildCommand: "npm ci && npm run build"
        startCommand: "npm run start:prod"
    endpoints:
      - port: 8080
        routes:
          - mohaeng-api-stag.dsmhs.kr
addons:
  - name: prod-mysql
    type: mysql
    storage: 1Gi
  - name: stag-mysql
    type: mysql
    storage: 1Gi
  - name: prod-redis
    type: redis
    storage: 1Gi
  - name: stag-redis
    type: redis
    storage: 1Gi
