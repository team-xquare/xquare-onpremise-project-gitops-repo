applications:
  - name: pick-core-prod
    github:
      owner: DSM-PICK
      repo: PICK_CORE_SERVER
      branch: main
      installationId: "64595989"
      hash: aa775bf7cc3eb6a5e24ff9b2a2065f05775b544d
    build:
      docker:
        dockerfilePath: ./Dockerfile
        contextPath: .
    endpoints:
      - port: 8080
        routes:
          - pick-core.dsmhs.kr
  - name: pick-core-stag
    github:
      owner: DSM-PICK
      repo: PICK_CORE_SERVER
      branch: develop
      installationId: "64595989"
      hash: 47ea6093f3ceab3bd094bb34b704919bab8f0bcf
    build:
      docker:
        dockerfilePath: ./Dockerfile
        contextPath: .
    endpoints:
      - port: 8080
        routes:
          - pick-core-stag.dsmhs.kr
  - name: pick-admin-prod
    github:
      owner: DSM-PICK
      repo: PiCK2024_FRONT_V2
      branch: main
      installationId: "64595989"
      hash: d7f00754d68865270048361408c824a299031b66
    build:
      vite:
        nodeVersion: "18"
        distPath: /dist
        buildCommand: yarn install && yarn install --frozen-lockfile && yarn build
    endpoints:
      - port: 8080
        routes:
          - pick-admin.dsmhs.kr
  - name: pick-admin-stag
    github:
      owner: DSM-PICK
      repo: PiCK2024_FRONT_V2
      branch: develop
      installationId: "64595989"
      hash: 01d5c50fe9cb660c3254108abb5670f81b665445
    build:
      vite:
        nodeVersion: "18"
        distPath: /dist
        buildCommand: yarn install && yarn install --frozen-lockfile && yarn build
    endpoints:
      - port: 8080
        routes:
          - pick-admin-stag.dsmhs.kr
  - name: pick-teacher-prod
    github:
      owner: DSM-PICK
      repo: PiCK2024_FRONT_TEACHER_V2
      branch: main
      installationId: "64595989"
      hash: bb9a3814989210731e12152aa5c3a031d1b438a9
    build:
      vite:
        nodeVersion: "18"
        distPath: /dist
        buildCommand: yarn install && yarn install --frozen-lockfile && yarn build
    endpoints:
      - port: 8080
        routes:
          - pick-teacher.dsmhs.kr
  - name: pick-teacher-stag
    github:
      owner: DSM-PICK
      repo: PiCK2024_FRONT_TEACHER_V2
      branch: develop
      installationId: "64595989"
      hash: e2bd1576687b3f1583a7b1dec738a104ac57b5da
    build:
      vite:
        nodeVersion: "18"
        distPath: /dist
        buildCommand: yarn install && yarn install --frozen-lockfile && yarn build
    endpoints:
      - port: 8080
        routes:
          - pick-teacher-stag.dsmhs.kr
addons:
  - name: pick-redis
    type: redis
    storage: 1Gi
  - name: pick-pick-core-prod-mysql
    type: mysql
    storage: 1Gi
  - name: pick-pick-core-stag-mysql
    type: mysql
    storage: 1Gi
  - name: pick-kafka-prod
    type: kafka
    storage: 2Gi
  - name: pick-kafka-stag
    type: kafka
    storage: 2Gi
  - name: pick-debezium-prod
    type: debezium
    storage: 5Gi
    bootstrap: "pick-kafka-prod:9092"
  - name: pick-debezium-stag
    type: debezium
    storage: 5Gi
    bootstrap: "pick-kafka-stag:9092"
