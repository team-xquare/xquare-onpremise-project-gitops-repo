applications:
  - name: pick-core-prod
    tier: x3.micro
    github:
      owner: DSM-PICK
      repo: PICK_CORE_SERVER
      branch: main
      installationId: "64595989"
    build:
      gradle:
        version: 17
        outputPath: /build/libs/PICK2024_SERVER-0.0.1-SNAPSHOT.jar
        sourcePath: /
        buildCmd: ./gradlew build -x test
    endpoints:
      - port: 8080
        routes:
          - pick-core.dsmhs.kr
  - name: pick-core-stag
    tier: x3.micro
    github:
      owner: DSM-PICK
      repo: PICK_CORE_SERVER
      branch: develop
      installationId: "64595989"
    build:
      gradle:
        version: 17
        outputPath: /build/libs/PICK2024_SERVER-0.0.1-SNAPSHOT.jar
        sourcePath: /
        buildCmd: ./gradlew build -x test
    endpoints:
      - port: 8080
        routes:
          - pick-core-stag.dsmhs.kr
  - name: pick-admin-prod
    tier: x3.small
    github:
      owner: DSM-PICK
      repo: PiCK2024_FRONT_V2
      branch: main
      installationId: "64595989"
    build:
      vite:
        version: "18"
        outputPath: /dist
        sourcePath: .
        buildCmd: yarn install --frozen-lockfile && yarn build
    endpoints:
      - port: 8080
        routes:
          - pick-admin.xquare.app
  - name: pick-admin-stag
    tier: x3.small
    github:
      owner: DSM-PICK
      repo: PiCK2024_FRONT_V2
      branch: develop
      installationId: "64595989"
    build:
      vite:
        version: "18"
        outputPath: /dist
        sourcePath: .
        buildCmd: yarn install --frozen-lockfile && yarn build
    endpoints:
      - port: 8080
        routes:
          - pick-admin-stag.xquare.app
  - name: pick-teacher-prod
    tier: x3.small
    github:
      owner: DSM-PICK
      repo: PiCK2024_FRONT_TEACHER_V2
      branch: main
      installationId: "64595989"
    build:
      vite:
        version: "18"
        outputPath: /dist
        sourcePath: .
        buildCmd: yarn install --frozen-lockfile && yarn build
    endpoints:
      - port: 8080
        routes:
          - pick-teacher.xquare.app
  - name: pick-teacher-stag
    tier: x3.small
    github:
      owner: DSM-PICK
      repo: PiCK2024_FRONT_TEACHER_V2
      branch: develop
      installationId: "64595989"
    build:
      vite:
        version: "18"
        outputPath: /dist
        sourcePath: .
        buildCmd: yarn install --frozen-lockfile && yarn build
    endpoints:
      - port: 8080
        routes:
          - pick-teacher-stag.xquare.app
