applications:
  - name: server
    github:
      owner: GuJeuk-Check-in
      repo: GuJeuk-Check-In_server
      branch: main
      installationId: "90332669"
      hash: 73166ab4a7a16a3e614f824f58af0c5ba9714459
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /build/libs/*.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - gujeuk-api.dsmhs.kr
  - name: server-stag
    github:
      owner: GuJeuk-Check-in
      repo: GuJeuk-Check-In_server
      branch: develop
      installationId: "90332669"
      hash: 9a55aae0f6faadacbee07679abe138a018df88b2
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /build/libs/*.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - gujeuk-api-stag.dsmhs.kr
  - name: frontend
    github:
      owner: GuJeuk-Check-in
      repo: GuJeuk-Check-in-FE
      branch: main
      installationId: "90332669"
      hash: 97aea5ede8ae53d0614aec445f5ce82df6038f18
    build:
      vite:
        nodeVersion: "20"
        distPath: /dist
        buildCommand: yarn install --frozen-lockfile && yarn build
    endpoints:
      - port: 8080
        routes:
          - gujeuk.dsmhs.kr
  - name: frontend-stag
    github:
      owner: GuJeuk-Check-in
      repo: GuJeuk-Check-in-FE
      branch: develop
      installationId: "90332669"
      hash: 54e1efb1e23f5d331147e2d8f2965b54498e9b1d
    build:
      vite:
        nodeVersion: "20"
        distPath: /dist
        buildCommand: yarn install --frozen-lockfile && yarn build
    endpoints:
      - port: 8080
        routes:
          - gujeuk-stag.dsmhs.kr
addons:
  - name: mysql-stag # prod
    type: mysql
    storage: 1Gi
  - name: mysql-really-stag # stag
    type: mysql
    storage: 1Gi
  - name: redis
    type: redis
    storage: 1Gi
  - name: redis-stag
    type: redis
    storage: 1Gi
