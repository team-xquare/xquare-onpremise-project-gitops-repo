applications:
  - name: s3-test-app
    github:
      owner: team-xquare
      repo: s3-test-app
      branch: main
      installationId: "62433388"
      hash: 3a33138a9ab168d033b607c3fcc0aa628093a8f0
    build:
      docker:
        dockerfilePath: "./Dockerfile"
        contextPath: "."
    endpoints:
      - port: 8080
        routes:
          - s3-test.dsmhs.kr
  - name: infra-backend-prod
    github:
      owner: team-xquare
      repo: xquare-infra-backend-v3
      branch: main
      installationId: "62433388"
      hash: 821a52252f57bb34a5f2fb3ce2bd7a5c9678cd7d
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /build/libs/*.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - infra-backend.dsmhs.kr
addons:
  - name: xquare-test
    type: seaweedfs
    storage: 1Gi
    buckets:
      - name: test-buckets
  - name: xquare-infra-mysql
    type: mysql
    storage: 1Gi
