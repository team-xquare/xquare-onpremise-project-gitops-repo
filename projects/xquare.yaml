applications:
  - name: xquare-supporter-prod
    github:
      owner: team-xquare
      repo: xquare-community-manager
      branch: main
      installationId: "62433388"
      hash: 23e0f998b5b607a222fe6b173e33f6a7bed4d0d5
    build:
      docker:
        dockerfilePath: "./Dockerfile"
        contextPath: "."
  - name: infra-backend-stag
    github:
      owner: team-xquare
      repo: xquare-infra-backend-v3
      branch: develop
      installationId: "62433388"
      hash: f123d8b3d7d092a1522ac35d23d154281a4b9a23
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /build/libs/*.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - infra-backend-stag.dsmhs.kr
  - name: infra-backend-prod
    github:
      owner: team-xquare
      repo: xquare-infra-backend-v3
      branch: main
      installationId: "62433388"
      hash: b58bb461944f45973dc66e79936dd64af1e86157
    build:
      gradle:
        javaVersion: 17
        jarOutputPath: /build/libs/*.jar
        buildCommand: ./gradlew bootJar -x test
    endpoints:
      - port: 8080
        routes:
          - infra-backend.dsmhs.kr
addons:
  - name: xquare-supporter-mongodb
    type: mongodb
    storage: 1Gi
  - name: xquare-infra-mysql
    type: mysql
    storage: 1Gi
  - name: xquare-infra-mysql-stag
    type: mysql
    storage: 1Gi
