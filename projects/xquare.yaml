applications:
  - name: xquare-frontend-prod
    tier: x3.small
    github:
      owner: team-xquare
      repo: xquare-frontend-v2
      branch: main
      installationId: "62433388"
    build:
      react:
        nodeVersion: "22"
        buildDir: /
        outputDir: /build
        port: 3000
        buildCommand: npm run build
    endpoints:
      - port: 3000
        routes:
          - infra.xquare.app
  - name: xquare-frontend-stag
    tier: x3.small
    github:
      owner: team-xquare
      repo: xquare-frontend-v2
      branch: develop
      installationId: "62433388"
      hash: latest
    build:
      react:
        nodeVersion: "22"
        buildDir: /
        outputDir: /build
        port: 3000
        buildCommand: npm run build
    endpoints:
      - port: 3000
        routes:
          - infra-stag.xquare.app
  - name: xquare-infra-prod
    tier: x3.small
    github:
      owner: team-xquare
      repo: xquare-infra-backend
      branch: main
      installationId: "62433388"
      hash: latest
    build:
      gradle:
        jdkVersion: 17
        buildDir: .
        outputDir: /build/libs/xquare-infra-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew build -x test
    endpoints:
      - port: 8080
        routes:
          - xquare-infra-backend.xquare.app
  - name: xquare-infra-stag
    tier: x3.small
    github:
      owner: team-xquare
      repo: xquare-infra-backend
      branch: develop
      installationId: "62433388"
      hash: latest
    build:
      gradle:
        jdkVersion: 17
        buildDir: /
        outputDir: /build/libs/xquare-infra-0.0.1-SNAPSHOT.jar
        buildCommand: ./gradlew build -x test
    endpoints:
      - port: 8080
        routes:
          - xquare-infra-backend-stag.xquare.app
