applications:
  - name: be-prod
    github:
      owner: team-OIL
      repo: OIL-BE
      branch: main
      installationId: "98874619"
      triggerPaths:
        - src/**
        - build.gradle
        - settings.gradle
        - gradle/**
        - gradlew
        - gradlew.bat
      hash: b13b88a5d9cac691f2ac422b0b7723dff8c68344
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: /build/libs/*.jar
        buildCommand: "./gradlew bootJar -x test"
    endpoints:
      - port: 8080
        routes:
          - oil-api.dsmhs.kr
  - name: be-stag
    github:
      owner: team-OIL
      repo: OIL-BE
      branch: develop
      installationId: "98874619"
      triggerPaths:
        - src/**
        - build.gradle
        - settings.gradle
        - gradle/**
        - gradlew
        - gradlew.bat
      hash: 6e3f1dd142beaf3ea74552dac0cecf2453dca6be
    build:
      gradle:
        javaVersion: "17"
        jarOutputPath: /build/libs/*.jar
        buildCommand: "./gradlew bootJar -x test"
    endpoints:
      - port: 8080
        routes:
          - oil-api-stag.dsmhs.kr
addons:
  - name: prod-mysql
    type: mysql
    storage: 1Gi
  - name: stag-mysql
    type: mysql
    storage: 1Gi
  - name: oil-redis
    type: redis
    storage: 1Gi
  - name: oil-seaweedfs
    type: seaweedfs
    storage: 1Gi
    buckets:
      - name: oil-buckets
